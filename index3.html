<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.2/color-thief.umd.js"></script>
    <title>Bella Angel</title>
	<style>
		.gallery {
			column-count: 3;
			column-gap: 1em;
		}
		.gallery img {
			width: 100%;
			margin-bottom: 1em;
			break-inside: avoid;
			border-radius: 8px;
		}
		@media (max-width: 768px) {
			.gallery {
				column-count: 2;
			}
		}
		@media (max-width: 480px) {
			.gallery {
 			   column-count: 1;
		   }
	   }
	   .text {
		   color: white;
		   margin-bottom: 1em;
		   background-color: gray;
		   border-radius: 8px;
		   padding: 5px;
	   }
	   </style>
	   <div class="gallery">
		     <div class="item">
		   <img src="pexels-anastasiya-gepp-654466-2065200.jpg" />
		   <div class="text">1 Un texto es una composición ordenada de signos inscritos en un soporte mediante un sistema de escritura, cuya lectura permite recuperar el sentido referido por el emisor.</div>
		   </div>
		     <div class="item">
		   <img src="pexels-rb-audiovisual-1819936.jpg" />
		   <div class="text">2 Un texto es una composición ordenada de signos inscritos en un soporte mediante un sistema de escritura, cuya lectura permite recuperar el sentido referido por el emisor.</div>
		   </div>
		     <div class="item">
		   <img src="pexels-pixabay-458766.jpg" />
		   <div class="text">3 Un texto es una composición ordenada de signos inscritos en un soporte mediante un sistema de escritura, cuya lectura permite recuperar el sentido referido por el emisor.</div>
		   </div>
		     <div class="item">
		   <img src="pexels-viscoseillusion-3185201.jpg" />
		   <div class="text">4 Un texto es una composición ordenada de signos inscritos en un soporte mediante un sistema de escritura, cuya lectura permite recuperar el sentido referido por el emisor.</div>
		   </div>
		     <div class="item">
		   <img src="pexels-frendsmans-1926769.jpg" />
		   <div class="text">5 Un texto es una composición ordenada de signos inscritos en un soporte mediante un sistema de escritura, cuya lectura permite recuperar el sentido referido por el emisor.</div>
		   </div>
		     <div class="item">
		   <img src="pexels-arina-shilyaeva-1586333-3048694.jpg" />
		   <div class="text">6 Un texto es una composición ordenada de signos inscritos en un soporte mediante un sistema de escritura, cuya lectura permite recuperar el sentido referido por el emisor.</div>
		   </div>
		     <div class="item">
		   <img src="pexels-alipazani-2810837.jpg" />
		   <div class="text">7 Un texto es una composición ordenada de signos inscritos en un soporte mediante un sistema de escritura, cuya lectura permite recuperar el sentido referido por el emisor.</div>
		   </div>
	   </div>
	</body>
	<script>
	  window.addEventListener('load', () => {
	    const colorThief = new ColorThief();
	    const items = document.querySelectorAll('.item');

	    items.forEach(item => {
	      const img = item.querySelector('img');
	      const text = item.querySelector('.text');

	      if (img.complete) {
	        applyColor();
	      } else {
	        img.addEventListener('load', applyColor);
	      }

	      function applyColor() {
	        try {
	          const color = colorThief.getColor(img);
	          const [r, g, b] = color;

	          // Asigna el color de fondo
	          text.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;

	          // Calcula la luminancia relativa (fórmula estándar)
	          const luminance = (0.299 * r + 0.587 * g + 0.114 * b);

	          // Si la luminancia es baja, usa texto blanco; si es alta, usa texto negro
	          text.style.color = luminance < 128 ? '#ffffff' : '#000000';
	        } catch (e) {
	          console.log('Error leyendo color de la imagen', e);
	        }
	      }
	    });
	  });
	</script>
</html>